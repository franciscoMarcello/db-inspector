<dialog class="report-modal" [open]="open">
  <div class="report-modal__panel report-modal__panel--small">
    <div class="report-modal__header">
      <h3>Gerenciar pastas</h3>
      <app-button type="button" tone="neutral" variant="outline" (pressed)="close.emit()">Fechar</app-button>
    </div>

    <div class="report-modal__body folder-manager">
      <div class="folder-manager__section">
        <label class="var-field">
          <span>Nova pasta</span>
          <input
            type="text"
            [ngModel]="newFolderName"
            [ngModelOptions]="{ standalone: true }"
            (ngModelChange)="newFolderNameChange.emit($event)"
            placeholder="Nome da pasta"
            (keydown.enter)="createFolder.emit()"
          />
        </label>
        <app-button type="button" tone="primary" variant="solid" (pressed)="createFolder.emit()">Criar pasta</app-button>
      </div>

      <div class="folder-manager__section">
        <label class="var-field">
          <span>Pasta para gerenciar</span>
          <select
            [ngModel]="selectedFolderId || ''"
            [ngModelOptions]="{ standalone: true }"
            (ngModelChange)="selectedFolderIdChange.emit($event)"
          >
            <option value="">Selecione uma pasta</option>
            <option *ngFor="let folder of folders" [value]="folder.id">
              {{ folder.name }}{{ folder.archived ? ' (arquivada)' : '' }}
            </option>
          </select>
        </label>

        <label class="var-field">
          <span>Novo nome da pasta</span>
          <input
            type="text"
            [ngModel]="renameFolderName"
            [ngModelOptions]="{ standalone: true }"
            (ngModelChange)="renameFolderNameChange.emit($event)"
            [disabled]="!selectedFolder"
            placeholder="Novo nome"
            (keydown.enter)="renameSelectedFolder.emit()"
          />
        </label>

        <div class="actions">
          <app-button
            type="button"
            tone="neutral"
            variant="outline"
            (pressed)="renameSelectedFolder.emit()"
            [disabled]="!selectedFolder"
          >
            Renomear
          </app-button>
          <app-button
            type="button"
            tone="neutral"
            variant="outline"
            (pressed)="archiveSelectedFolder.emit()"
            [disabled]="!selectedFolder || !!selectedFolder.archived"
          >
            Arquivar
          </app-button>
          <app-button
            type="button"
            tone="neutral"
            variant="outline"
            (pressed)="unarchiveSelectedFolder.emit()"
            [disabled]="!selectedFolder || !selectedFolder.archived"
          >
            Desarquivar
          </app-button>
        </div>
      </div>

    </div>
  </div>
</dialog>
